!function(){function aq(){}function ak(a){return a}function aA(a){return !!a}function am(a){return !a}function aj(a){return function(){if(null===a){throw new Error("Callback was already called.")}a.apply(this,arguments),a=null}}function aw(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function ap(a){return R(a)||"number"==typeof a.length&&a.length>=0&&a.length%1===0}function aC(d,a){for(var c=-1,b=d.length;++c<b;){a(d[c],c,d)}}function aE(f,b){for(var d=-1,c=f.length,a=Array(c);++d<c;){a[d]=b(f[d],d,f)}return a}function az(a){return aE(Array(a),function(c,b){return b})}function at(c,a,b){return aC(c,function(f,e,d){b=a(b,f,e,d)}),b}function al(b,a){aC(F(b),function(c){a(b[c],c)})}function ao(c,a){for(var b=0;b<c.length;b++){if(c[b]===a){return b}}return -1}function ax(d){var a,c,b=-1;return ap(d)?(a=d.length,function(){return b++,a>b?b:null}):(c=F(d),a=c.length,function(){return b++,a>b?c[b]:null})}function ar(b,a){return a=null==a?b.length-1:+a,function(){for(var f=Math.max(arguments.length-a,0),d=Array(f),c=0;f>c;c++){d[c]=arguments[c+a]}switch(a){case 0:return b.call(this,d);case 1:return b.call(this,arguments[0],d)}}}function af(a){return function(b,d,c){return a(b,c)}}function ai(a){return function(j,h,k){k=aw(k||aq),j=j||[];var m=ax(j);if(0>=a){return k(null)}var d=!1,i=0,b=!1;!function g(){if(d&&0>=i){return k(null)}for(;a>i&&!b;){var c=m();if(null===c){return d=!0,void (0>=i&&k(null))}i+=1,h(j[c],c,aj(function(e){i-=1,e?(k(e),b=!0):g()}))}}()}}function aB(a){return function(b,d,c){return a(N.eachOf,b,d,c)}}function ay(a){return function(c,f,d,b){return a(ai(f),c,d,b)}}function au(a){return function(b,d,c){return a(N.eachOfSeries,b,d,c)}}function aD(b,f,d,a){a=aw(a||aq),f=f||[];var g=ap(f)?[]:{};b(f,function(i,c,h){d(i,function(j,e){g[c]=e,h(j)})},function(c){a(c,g)})}function ah(f,b,d,c){var a=[];f(b,function(h,e,g){d(h,function(i){i&&a.push({index:e,value:h}),g()})},function(){c(aE(a.sort(function(g,e){return g.index-e.index}),function(e){return e.value}))})}function Q(d,a,c,b){ah(d,a,function(f,e){c(f,function(g){e(!g)})},b)}function K(c,a,b){return function(g,e,f,h){function j(){h&&h(b(!1,void 0))}function d(l,k,i){return h?void f(l,function(m){h&&a(m)&&(h(b(!0,l)),h=f=!1),i()}):i()}arguments.length>3?c(g,e,d,j):(h=f,f=e,c(g,d,j))}}function Z(b,a){return a}function V(b,d,c){c=c||aq;var a=ap(d)?[]:{};b(d,function(h,f,g){h(ar(function(i,e){e.length<=1&&(e=e[0]),a[f]=e,g(i)}))},function(e){c(e,a)})}function av(f,b,d,c){var a=[];f(b,function(h,e,g){d(h,function(j,i){a=a.concat(i||[]),g(j)})},function(e){c(e,a)})}function X(c,j,g){function b(i,m,l,f){if(null!=f&&"function"!=typeof f){throw new Error("task callback must be a function")}return i.started=!0,R(m)||(m=[m]),0===m.length&&i.idle()?N.setImmediate(function(){i.drain()}):(aC(m,function(o){var n={data:o,callback:f||aq};l?i.tasks.unshift(n):i.tasks.push(n),i.tasks.length===i.concurrency&&i.saturated()}),void N.setImmediate(i.process))}function k(f,e){return function(){h-=1;var l=!1,i=arguments;aC(e,function(m){aC(a,function(n,o){n!==m||l||(a.splice(o,1),l=!0)}),m.callback.apply(m,i)}),f.tasks.length+h===0&&f.drain(),f.process()}}if(null==j){j=1}else{if(0===j){throw new Error("Concurrency must not be zero")}}var h=0,a=[],d={tasks:[],concurrency:j,payload:g,saturated:aq,empty:aq,drain:aq,started:!1,paused:!1,push:function(f,e){b(d,f,!1,e)},kill:function(){d.drain=aq,d.tasks=[]},unshift:function(f,e){b(d,f,!0,e)},process:function(){for(;!d.paused&&h<d.concurrency&&d.tasks.length;){var l=d.payload?d.tasks.splice(0,d.payload):d.tasks.splice(0,d.tasks.length),i=aE(l,function(e){return e.data});0===d.tasks.length&&d.empty(),h+=1,a.push(l[0]);var f=aj(k(d,l));c(i,f)}},length:function(){return d.tasks.length},running:function(){return h},workersList:function(){return a},idle:function(){return d.tasks.length+h===0},pause:function(){d.paused=!0},resume:function(){if(d.paused!==!1){d.paused=!1;for(var f=Math.min(d.concurrency,d.tasks.length),e=1;f>=e;e++){N.setImmediate(d.process)}}}};return d}function ag(a){return ar(function(b,c){b.apply(null,c.concat([ar(function(d,f){"object"==typeof console&&(d?console.error&&console.error(d):console[a]&&aC(f,function(e){console[a](e)}))})]))})}function ad(a){return function(b,d,c){a(az(b),d,c)}}function J(a){return ar(function(b,d){var c=ar(function(h){var g=this,f=h.pop();return a(b,function(j,i,e){j.apply(g,h.concat([e]))},f)});return d.length?c.apply(this,d):c})}function ae(a){return ar(function(b){var d=b.pop();b.push(function(){var e=arguments;c?N.setImmediate(function(){d.apply(null,e)}):d.apply(null,e)});var c=!0;a.apply(this,b),c=!1})}var an,N={},ab="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=ab&&(an=ab.async),N.noConflict=function(){return ab.async=an,N};var Y=Object.prototype.toString,R=Array.isArray||function(a){return"[object Array]"===Y.call(a)},G=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b},F=Object.keys||function(c){var a=[];for(var b in c){c.hasOwnProperty(b)&&a.push(b)}return a},ac="function"==typeof setImmediate&&setImmediate,aa=ac?function(a){ac(a)}:function(a){setTimeout(a,0)};"object"==typeof process&&"function"==typeof process.nextTick?N.nextTick=process.nextTick:N.nextTick=aa,N.setImmediate=ac?aa:N.nextTick,N.forEach=N.each=function(c,a,b){return N.eachOf(c,af(a),b)},N.forEachSeries=N.eachSeries=function(c,a,b){return N.eachOfSeries(c,af(a),b)},N.forEachLimit=N.eachLimit=function(d,a,c,b){return ai(a)(d,af(c),b)},N.forEachOf=N.eachOf=function(d,i,g){function j(a){h--,a?g(a):null===k&&0>=h&&g(null)}g=aw(g||aq),d=d||[];for(var k,b=ax(d),h=0;null!=(k=b());){h+=1,i(d[k],k,aj(j))}0===h&&g(null)},N.forEachOfSeries=N.eachOfSeries=function(d,g,f){function h(){var a=!0;return null===b?f(null):(g(d[b],b,aj(function(c){if(c){f(c)}else{if(b=i(),null===b){return f(null)}a?N.setImmediate(h):h()}})),void (a=!1))}f=aw(f||aq),d=d||[];var i=ax(d),b=i();h()},N.forEachOfLimit=N.eachOfLimit=function(d,a,c,b){ai(a)(d,c,b)},N.map=aB(aD),N.mapSeries=au(aD),N.mapLimit=ay(aD),N.inject=N.foldl=N.reduce=function(d,a,c,b){N.eachOfSeries(d,function(g,f,e){c(a,g,function(i,h){a=h,e(i)})},function(e){b(e,a)})},N.foldr=N.reduceRight=function(f,d,c,a){var b=aE(f,ak).reverse();N.reduce(b,d,c,a)},N.transform=function(d,a,c,b){3===arguments.length&&(b=c,c=a,a=R(d)?[]:{}),N.eachOf(d,function(g,f,e){c(a,g,f,e)},function(e){b(e,a)})},N.select=N.filter=aB(ah),N.selectLimit=N.filterLimit=ay(ah),N.selectSeries=N.filterSeries=au(ah),N.reject=aB(Q),N.rejectLimit=ay(Q),N.rejectSeries=au(Q),N.any=N.some=K(N.eachOf,aA,ak),N.someLimit=K(N.eachOfLimit,aA,ak),N.all=N.every=K(N.eachOf,am,am),N.everyLimit=K(N.eachOfLimit,am,am),N.detect=K(N.eachOf,ak,Z),N.detectSeries=K(N.eachOfSeries,ak,Z),N.detectLimit=K(N.eachOfLimit,ak,Z),N.sortBy=function(d,a,c){function b(i,f){var h=i.criteria,g=f.criteria;return g>h?-1:h>g?1:0}N.map(d,function(g,f){a(g,function(e,h){e?f(e):f(null,{value:g,criteria:h})})},function(f,e){return f?c(f):void c(null,aE(e.sort(b),function(g){return g.value}))})},N.auto=function(w,l,b){function s(a){j.unshift(a)}function c(d){var a=ao(j,d);a>=0&&j.splice(a,1)}function p(){i--,aC(j.slice(0),function(a){a()})}"function"==typeof arguments[1]&&(b=l,l=null),b=aw(b||aq);var k=F(w),i=k.length;if(!i){return b(null)}l||(l=i);var n={},q=0,m=!1,j=[];s(function(){i||b(null,n)}),aC(k,function(v){function e(){return l>q&&at(d,function(g,f){return g&&n.hasOwnProperty(f)},!0)&&!n.hasOwnProperty(v)}function u(){e()&&(q++,c(u),o[o.length-1](r,n))}if(!m){for(var t,o=R(w[v])?w[v]:[w[v]],r=ar(function(g,h){if(q--,h.length<=1&&(h=h[0]),g){var f={};al(n,function(y,x){f[x]=y}),f[v]=h,m=!0,b(g,f)}else{n[v]=h,N.setImmediate(p)}}),d=o.slice(0,o.length-1),a=d.length;a--;){if(!(t=w[d[a]])){throw new Error("Has nonexistent dependency in "+d.join(", "))}if(R(t)&&ao(t,v)>=0){throw new Error("Has cyclic dependencies")}}e()?(q++,o[o.length-1](r,n)):s(u)}})},N.retry=function(g,q,k){function b(c,a){if("number"==typeof a){c.times=parseInt(a,10)||h}else{if("object"!=typeof a){throw new Error("Unsupported argument type for 'times': "+typeof a)}c.times=parseInt(a.times,10)||h,c.interval=parseInt(a.interval,10)||d}}function p(o,c){function i(s,r){return function(e){s(function(v,u){e(!v||r,{err:v,result:u})},c)}}function f(e){return function(n){setTimeout(function(){n(null)},e)}}for(;m.times;){var a=!(m.times-=1);l.push(i(m.task,a)),!a&&m.interval>0&&l.push(f(m.interval))}N.series(l,function(n,r){r=r[r.length-1],(o||m.callback)(r.err,r.result)})}var h=5,d=0,l=[],m={times:h,interval:d},j=arguments.length;if(1>j||j>3){throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)")}return 2>=j&&"function"==typeof g&&(k=q,q=g),"function"!=typeof g&&b(m,g),m.callback=k,m.task=q,m.callback?p():p},N.waterfall=function(b,d){function c(e){return ar(function(h,f){if(h){d.apply(null,[h].concat(f))}else{var g=e.next();g?f.push(c(g)):f.push(d),ae(e).apply(null,f)}})}if(d=aw(d||aq),!R(b)){var a=new Error("First argument to waterfall must be an array of functions");return d(a)}return b.length?void c(N.iterator(b))():d()},N.parallel=function(b,a){V(N.eachOf,b,a)},N.parallelLimit=function(c,a,b){V(ai(a),c,b)},N.series=function(b,a){V(N.eachOfSeries,b,a)},N.iterator=function(b){function a(d){function c(){return b.length&&b[d].apply(null,arguments),c.next()}return c.next=function(){return d<b.length-1?a(d+1):null},c}return a(0)},N.apply=ar(function(b,a){return ar(function(c){return b.apply(null,a.concat(c))})}),N.concat=aB(av),N.concatSeries=au(av),N.whilst=function(b,d,c){if(c=c||aq,b()){var a=ar(function(f,e){f?c(f):b.apply(this,e)?d(a):c.apply(null,[null].concat(e))});d(a)}else{c(null)}},N.doWhilst=function(d,a,c){var b=0;return N.whilst(function(){return ++b<=1||a.apply(this,arguments)},d,c)},N.until=function(c,a,b){return N.whilst(function(){return !c.apply(this,arguments)},a,b)},N.doUntil=function(c,a,b){return N.doWhilst(c,function(){return !a.apply(this,arguments)},b)},N.during=function(c,f,d){d=d||aq;var a=ar(function(h,g){h?d(h):(g.push(b),c.apply(this,g))}),b=function(g,e){g?d(g):e?f(a):d(null)};c(b)},N.doDuring=function(d,a,c){var b=0;N.during(function(e){b++<1?e(null,!0):a.apply(this,arguments)},d,c)},N.queue=function(c,a){var b=X(function(d,f){c(d[0],f)},a,1);return b},N.priorityQueue=function(c,f){function d(h,e){return h.priority-e.priority}function a(o,k,m){for(var l=-1,h=o.length-1;h>l;){var j=l+(h-l+1>>>1);m(k,o[j])>=0?l=j:h=j-1}return l}function b(j,k,h,l){if(null!=l&&"function"!=typeof l){throw new Error("task callback must be a function")}return j.started=!0,R(k)||(k=[k]),0===k.length?N.setImmediate(function(){j.drain()}):void aC(k,function(i){var m={data:i,priority:h,callback:"function"==typeof l?l:aq};j.tasks.splice(a(j.tasks,m,d)+1,0,m),j.tasks.length===j.concurrency&&j.saturated(),N.setImmediate(j.process)})}var g=N.queue(c,f);return g.push=function(j,h,i){b(g,j,h,i)},delete g.unshift,g},N.cargo=function(b,a){return X(b,1,a)},N.log=ag("log"),N.dir=ag("dir"),N.memoize=function(g,d){var c={},a={},b=Object.prototype.hasOwnProperty;d=d||ak;var f=ar(function(e){var h=e.pop(),i=d.apply(null,e);b.call(c,i)?N.setImmediate(function(){h.apply(null,c[i])}):b.call(a,i)?a[i].push(h):(a[i]=[h],g.apply(null,e.concat([ar(function(m){c[i]=m;var k=a[i];delete a[i];for(var l=0,j=k.length;j>l;l++){k[l].apply(null,m)}})])))});return f.memo=c,f.unmemoized=g,f},N.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},N.times=ad(N.map),N.timesSeries=ad(N.mapSeries),N.timesLimit=function(d,a,c,b){return N.mapLimit(az(d),a,c,b)},N.seq=function(){var a=arguments;return ar(function(d){var c=this,b=d[d.length-1];"function"==typeof b?d.pop():b=aq,N.reduce(a,d,function(h,f,g){f.apply(c,h.concat([ar(function(i,e){g(i,e)})]))},function(f,e){b.apply(c,[f].concat(e))})})},N.compose=function(){return N.seq.apply(null,Array.prototype.reverse.call(arguments))},N.applyEach=J(N.eachOf),N.applyEachSeries=J(N.eachOfSeries),N.forever=function(b,d){function c(e){return e?a(e):void f(c)}var a=aj(d||aq),f=ae(b);c()},N.ensureAsync=ae,N.constant=ar(function(b){var a=[null].concat(b);return function(c){return c.apply(this,a)}}),N.wrapSync=N.asyncify=function(a){return ar(function(c){var f,d=c.pop();try{f=a.apply(this,c)}catch(b){return d(b)}G(f)&&"function"==typeof f.then?f.then(function(e){d(null,e)})["catch"](function(e){d(e.message?e:new Error(e))}):d(null,f)})},"object"==typeof module&&module.exports?module.exports=N:"function"==typeof define&&define.amd?define([],function(){return N}):ab.async=N}();