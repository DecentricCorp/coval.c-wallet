!function(a){jQuery.fn.extend({html5_qrcode:function(d,b,c){return this.each(function(){var h=a(this),n=h.height(),g=h.width();null==n&&(n=250),null==g&&(g=300);var m,k=a('<video width="'+g+'px" height="'+n+'px"></video>').appendTo(h),l=a('<canvas id="qr-canvas" width="'+(g-2)+'px" height="'+(n-2)+'px" style="display:none;"></canvas>').appendTo(h),f=k[0],j=l[0],e=j.getContext("2d"),o=function(){if(m){e.drawImage(f,0,0,307,250);try{qrcode.decode()}catch(p){b(p,m)}a.data(h[0],"timeout",setTimeout(o,500))}else{a.data(h[0],"timeout",setTimeout(o,500))}};window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var i=function(p){f.src=window.URL&&window.URL.createObjectURL(p)||p,m=p,a.data(h[0],"stream",p),f.play(),a.data(h[0],"timeout",setTimeout(o,1000))};navigator.getUserMedia?navigator.getUserMedia({video:!0},i,function(p){c(p,m)}):console.log("Native web camera streaming (getUserMedia) not supported in this browser."),qrcode.callback=function(p){d(p,m)}})},html5_qrcode_stop:function(){return this.each(function(){a(this).data("stream").getVideoTracks().forEach(function(b){b.stop()}),clearTimeout(a(this).data("timeout"))})}})}(jQuery);